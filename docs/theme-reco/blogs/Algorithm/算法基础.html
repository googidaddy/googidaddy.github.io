<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>算法基础 | domado</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="xxx">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.1157b0c6.css" as="style"><link rel="preload" href="/assets/js/app.2403c8f5.js" as="script"><link rel="preload" href="/assets/js/3.5290c131.js" as="script"><link rel="preload" href="/assets/js/1.61311bc5.js" as="script"><link rel="preload" href="/assets/js/16.74b6388d.js" as="script"><link rel="prefetch" href="/assets/js/10.d9363816.js"><link rel="prefetch" href="/assets/js/11.a0d1c4c1.js"><link rel="prefetch" href="/assets/js/12.7743eba8.js"><link rel="prefetch" href="/assets/js/13.c3e9ecfc.js"><link rel="prefetch" href="/assets/js/14.ef6868c3.js"><link rel="prefetch" href="/assets/js/15.ab4e87b5.js"><link rel="prefetch" href="/assets/js/17.87faf50d.js"><link rel="prefetch" href="/assets/js/18.bd3a2019.js"><link rel="prefetch" href="/assets/js/19.a5acf611.js"><link rel="prefetch" href="/assets/js/20.2260df6c.js"><link rel="prefetch" href="/assets/js/21.33e42bdb.js"><link rel="prefetch" href="/assets/js/22.88c8d5a3.js"><link rel="prefetch" href="/assets/js/23.bbdac234.js"><link rel="prefetch" href="/assets/js/24.ecd35267.js"><link rel="prefetch" href="/assets/js/25.109d787d.js"><link rel="prefetch" href="/assets/js/26.2775c6a9.js"><link rel="prefetch" href="/assets/js/27.cdd1c73e.js"><link rel="prefetch" href="/assets/js/28.107ef52c.js"><link rel="prefetch" href="/assets/js/29.f3695a7f.js"><link rel="prefetch" href="/assets/js/30.48b407df.js"><link rel="prefetch" href="/assets/js/31.984326e9.js"><link rel="prefetch" href="/assets/js/32.66a802eb.js"><link rel="prefetch" href="/assets/js/33.4ba291d0.js"><link rel="prefetch" href="/assets/js/34.033c13dc.js"><link rel="prefetch" href="/assets/js/35.1d192b81.js"><link rel="prefetch" href="/assets/js/36.d954073f.js"><link rel="prefetch" href="/assets/js/37.aebfd920.js"><link rel="prefetch" href="/assets/js/38.2cdf88bf.js"><link rel="prefetch" href="/assets/js/39.a5e32144.js"><link rel="prefetch" href="/assets/js/4.4ac1d3a7.js"><link rel="prefetch" href="/assets/js/40.cacb935f.js"><link rel="prefetch" href="/assets/js/41.9e9aad8d.js"><link rel="prefetch" href="/assets/js/42.c2da6c5f.js"><link rel="prefetch" href="/assets/js/43.811e622a.js"><link rel="prefetch" href="/assets/js/44.44c89ac0.js"><link rel="prefetch" href="/assets/js/45.50aed65a.js"><link rel="prefetch" href="/assets/js/46.40e51c90.js"><link rel="prefetch" href="/assets/js/47.5a59a03d.js"><link rel="prefetch" href="/assets/js/48.53311359.js"><link rel="prefetch" href="/assets/js/49.2ec15223.js"><link rel="prefetch" href="/assets/js/5.1f4bde0e.js"><link rel="prefetch" href="/assets/js/50.844fcf67.js"><link rel="prefetch" href="/assets/js/51.f1ae7b60.js"><link rel="prefetch" href="/assets/js/52.0adabeca.js"><link rel="prefetch" href="/assets/js/53.571a0af8.js"><link rel="prefetch" href="/assets/js/54.964f215b.js"><link rel="prefetch" href="/assets/js/55.d5dba0ba.js"><link rel="prefetch" href="/assets/js/56.0bf605df.js"><link rel="prefetch" href="/assets/js/57.24ee5502.js"><link rel="prefetch" href="/assets/js/58.2a4adf44.js"><link rel="prefetch" href="/assets/js/59.799c279f.js"><link rel="prefetch" href="/assets/js/6.c6b2ff78.js"><link rel="prefetch" href="/assets/js/60.ea00dc80.js"><link rel="prefetch" href="/assets/js/61.8c350c01.js"><link rel="prefetch" href="/assets/js/62.4a0f8131.js"><link rel="prefetch" href="/assets/js/63.21921052.js"><link rel="prefetch" href="/assets/js/64.c5b4f6fe.js"><link rel="prefetch" href="/assets/js/65.3a2cfd92.js"><link rel="prefetch" href="/assets/js/66.f344e2ac.js"><link rel="prefetch" href="/assets/js/67.4c0311d2.js"><link rel="prefetch" href="/assets/js/68.b3519345.js"><link rel="prefetch" href="/assets/js/69.826f8f89.js"><link rel="prefetch" href="/assets/js/7.2ff0732d.js"><link rel="prefetch" href="/assets/js/70.03b89a8e.js"><link rel="prefetch" href="/assets/js/71.76f16735.js"><link rel="prefetch" href="/assets/js/8.bede8185.js"><link rel="prefetch" href="/assets/js/9.5f20e837.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1157b0c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-2d5f533b><div data-v-2d5f533b><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-2d5f533b data-v-2d5f533b><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-2d5f533b data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>domado</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>sicko</span>
            
          <span data-v-64685f0e>2017 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-2d5f533b><header class="navbar" data-v-2d5f533b><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/3.ico" alt="domado" class="logo"> <span class="site-name">domado</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  最近
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-blog"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/front/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/Algorithm/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/C++/" class="nav-link"><i class="iconfont undefined"></i>
  C++
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/notes/" class="nav-link"><i class="iconfont undefined"></i>
  notes
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/tech/" class="nav-link"><i class="iconfont undefined"></i>
  技术
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/Vue3/" class="nav-link"><i class="iconfont undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/Golang/" class="nav-link"><i class="iconfont undefined"></i>
  Golang
</a></li></ul></div></div><div class="nav-item"><a href="/others/" class="nav-link"><i class="iconfont reco-other"></i>
  杂聊
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-github"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/googidaddy" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ibb.co/ZJmPFWs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-wechat"></i>
  Wechat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/Algorithm/算法基础.html" class="nav-link"><i class="iconfont undefined"></i>
  zh-CN
</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link"><i class="iconfont undefined"></i>
  en-US
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-2d5f533b></div> <aside class="sidebar" data-v-2d5f533b><div class="personal-info-wrapper" data-v-ca798c94 data-v-2d5f533b><img src="/02.png" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    sicko
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>39</h3> <h6 data-v-ca798c94>文章</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>36</h3> <h6 data-v-ca798c94>标签</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  最近
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-blog"></i>
      文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/front/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/Algorithm/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/C++/" class="nav-link"><i class="iconfont undefined"></i>
  C++
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/notes/" class="nav-link"><i class="iconfont undefined"></i>
  notes
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/tech/" class="nav-link"><i class="iconfont undefined"></i>
  技术
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/Vue3/" class="nav-link"><i class="iconfont undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/Golang/" class="nav-link"><i class="iconfont undefined"></i>
  Golang
</a></li></ul></div></div><div class="nav-item"><a href="/others/" class="nav-link"><i class="iconfont reco-other"></i>
  杂聊
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-github"></i>
      联系
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/googidaddy" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ibb.co/ZJmPFWs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-wechat"></i>
  Wechat
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      Languages
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/theme-reco/blogs/Algorithm/算法基础.html" class="nav-link"><i class="iconfont undefined"></i>
  zh-CN
</a></li><li class="dropdown-item"><!----> <a href="/en/" class="nav-link"><i class="iconfont undefined"></i>
  en-US
</a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/docs/theme-reco/blogs/Algorithm/" aria-current="page" class="sidebar-link">算法</a></li><li><a href="/docs/theme-reco/blogs/Algorithm/算法基础.html" class="active sidebar-link">算法基础</a></li><li><a href="/docs/theme-reco/blogs/Algorithm/算法基础（二）.html" class="sidebar-link">算法基础（二）</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>算法基础</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>sicko</span>
            
          <span data-v-64685f0e>2017 - </span>
          2021
        </a></span></div></div> <div data-v-2d5f533b><main class="page"><div class="page-title" style="display:none;"><h1 class="title">算法基础</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>sicko</span></i> <i class="iconfont reco-date" data-v-3b7f5bdf><span data-v-3b7f5bdf>2021-03-20</span></i> <i class="iconfont reco-eye" data-v-3b7f5bdf><span id="/docs/theme-reco/blogs/Algorithm/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-3b7f5bdf><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-3b7f5bdf><span class="tag-item" data-v-3b7f5bdf>算法</span><span class="tag-item" data-v-3b7f5bdf>Algorithm</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="算法基础"><a href="#算法基础" class="header-anchor">#</a> 算法基础</h1> <h2 id="枚举"><a href="#枚举" class="header-anchor">#</a> 枚举</h2> <p>枚举（英语：Enumerate）是基于已有知识来猜测答案的一种问题求解策略。</p> <p>枚举的思想是不断地猜测，从可能的集合中一一尝试，然后再判断题目的条件是否成立。</p> <h3 id="要点"><a href="#要点" class="header-anchor">#</a> 要点</h3> <h3 id="给出解空间"><a href="#给出解空间" class="header-anchor">#</a> <strong>给出解空间</strong></h3> <p><strong>建立简洁的数学模型</strong></p> <p><strong>枚举的适合要想清楚：可能的情况是什么？枚举哪些要素？</strong></p> <h3 id="减少枚举的空间"><a href="#减少枚举的空间" class="header-anchor">#</a> 减少枚举的空间</h3> <p><strong>枚举的范围是什么？是所有的内容都需要枚举吗？</strong></p> <p><strong>再用枚举法解决问题的适合，一定要想清楚这两件事，否者会带来不必要的开销。</strong></p> <h3 id="选择合适的枚举顺序"><a href="#选择合适的枚举顺序" class="header-anchor">#</a> 选择合适的枚举顺序</h3> <p><strong>根据题目判断。比如例题中要求的是最大的符合条件的素数，那自然是从小到大枚举比较合适。</strong></p> <h3 id="例题"><a href="#例题" class="header-anchor">#</a> 例题</h3> <p>一个数组中的数互不相同，求其中和为 0的数对的个数</p> <hr> <p>枚举两个数的代码很容易就可以写出来。</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>for (int i = 0; i &lt; n; ++i)
  for (int j = 0; j &lt; n; ++j)
    if (a[i] + a[j] == 0) ++ans;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>来看看枚举的范围如何优化。原问题的答案由两部分构成：两个数相等的情况和不相等的情况。相等的情况只需要枚举每一个数判断一下是否合法。至于不相等的情况，由于题中没要求数对是有序的，答案就是有序的情况的两倍（考虑如果 <code>(a, b)</code> 是答案，那么 <code>(b, a)</code> 也是答案）。对于这种情况，只需统计人为要求有顺序之后的答案，最后再乘上 2就好了。</p> <p>不妨要求第一个数要出现在靠前的位置。代码如下：</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>for (int i = 0; i &lt; n; ++i)
  for (int j = 0; j &lt; i; ++j)
    if (a[i] + a[j] == 0) ++ans;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>不难发现这里已经减少了 的枚举范围，减少了这段代码的时间开销。</p> <p>然而这并不是最优的结果。</p> <p>两个数是否都一定要枚举出来呢？枚举其中一个数之后，题目的条件已经确定了其他的要素（另一个数），如果能找到一种方法直接判断题目要求的那个数是否存在，就可以省掉枚举后一个数的时间了。</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>// 要求 a 数组中的数的绝对值都小于 MAXN
bool met[MAXN * 2];
// 初始化 met 数组为 0；
memset(met, 0, sizeof(met));
for (int i = 0; i &lt; n; ++i) {
  if (met[MAXN - a[i]]) ++ans;
  // 为了避免负数下标
  met[a[i] + MAXN] = 1;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>PS:我也没想明白咋优化的，提示：当a是桶数组</strong></p> <hr> <h2 id="递归-分治"><a href="#递归-分治" class="header-anchor">#</a> 递归&amp;分治</h2> <p><strong>递归（英语：Recursion），在数学和计算机科学中是指在函数的定义中使用函数自身的方法，在计算机科学中还额外指一种通过重复将问题分解为同类的子问题而解决问题的方法。</strong></p> <p><strong>分治（英语：Divide and Conquer），字面上的解释是“分而治之”，就是把一个复杂的问题分成两个或更多的相同或相似的子问题，直到最后子问题可以简单的直接求解，原问题的解即子问题的解的合并。</strong></p> <h3 id="递归"><a href="#递归" class="header-anchor">#</a> 递归</h3> <blockquote><p>要理解递归，就得先理解什么是递归。</p></blockquote> <p>递归的基本思想是某个函数直接或者间接地调用自身，这样原问题的求解就转换为了许多性质相同但是规模更小的子问题。求解时只需要关注如何把原问题划分成符合条件的子问题，而不需要过分关注这个子问题是如何被解决的。</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>int func(传入数值) {
  if (终止条件) return 最小子问题解;
  return func(缩小规模);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-c++ line-numbers-mode"><pre class="language-text"><code>//不使用递归的归并排序算法
template &lt;typename T&gt;
void merge_sort(vector&lt;T&gt; a) {
  int n = a.size();
  for (int seg = 1; seg &lt; n; seg = seg + seg)
    for (int start = 0; start &lt; n - seg; start += seg + seg)
      merge(a, start, start + seg - 1, std::min(start + seg + seg - 1, n - 1));
}

//使用递归的归并排序算法
template &lt;typename T&gt;
void merge_sort(vector&lt;T&gt; a, int front, int end) {
  if (front &gt;= end) return;
  int mid = front + (end - front) / 2;
  merge_sort(a, front, mid);
  merge_sort(a, mid + 1, end);
  merge(a, front, mid, end);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h4> <p>在程序执行中，递归是利用堆栈来实现的。每当进入一个函数调用，栈就会增加一层栈帧，每次函数返回，栈就会减少一层栈帧。而栈不是无限大的，当递归层数过多时，就会造成 <strong>栈溢出</strong> 的后果。</p> <p>显然有时候递归处理是高效的，比如归并排序；<strong>有时候是低效的</strong>，比如数孙悟空身上的毛，因为堆栈会消耗额外空间，而简单的递推不会消耗空间。比如这个例子，给一个链表头，计算它的长度：</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>// 典型的递推遍历框架
int size(Node *head) {
  int size = 0;
  for (Node *p = head; p != nullptr; p = p-&gt;next) size++;
  return size;
}

// 我就是要写递归，递归天下第一
int size_recurison(Node *head) {
  if (head == nullptr) return 0;
  return size_recurison(head-&gt;next) + 1;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="递归优化"><a href="#递归优化" class="header-anchor">#</a> 递归优化</h4> <p>主页面：<a href="https://oi-wiki.org/search/opt/" target="_blank" rel="noopener noreferrer">搜索优化<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://oi-wiki.org/dp/memo/" target="_blank" rel="noopener noreferrer">记忆化搜索<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>比较初级的递归实现可能递归次数太多，容易超时。这时需要对递归进行优化。</p> <h4 id="分治算法"><a href="#分治算法" class="header-anchor">#</a> 分治算法</h4> <p>大概的流程可以分为三步：分解 -&gt; 解决 -&gt; 合并。</p> <ol><li>分解原问题为结构相同的子问题。</li> <li>分解到某个容易求解的边界之后，进行递归求解。</li> <li>将子问题的解合并成原问题的解。</li></ol> <p>分治法能解决的问题一般有如下特征：</p> <ul><li>该问题的规模缩小到一定的程度就可以容易地解决。</li> <li>该问题可以分解为若干个规模较小的相同问题，即该问题具有最优子结构性质，利用该问题分解出的子问题的解可以合并为该问题的解。</li> <li>该问题所分解出的各个子问题是相互独立的，即子问题之间不包含公共的子问题。</li></ul> <blockquote><p>如果各子问题是不独立的，则分治法要重复地解公共的子问题，也就做了许多不必要的工作。此时虽然也可用分治法，但一般用 <a href="https://oi-wiki.org/dp/basic/" target="_blank" rel="noopener noreferrer">动态规划<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 较好。</p></blockquote> <p>以归并排序为例。假设实现归并排序的函数名为 <code>merge_sort</code>。明确该函数的职责，即 <strong>对传入的一个数组排序</strong>。这个问题显然可以分解。给一个数组排序等于给该数组的左右两半分别排序，然后合并成一个数组。</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>void merge_sort(一个数组) {
  if (可以很容易处理) return;
  merge_sort(左半个数组);
  merge_sort(右半个数组);
  merge(左半个数组, 右半个数组);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>传给它半个数组，那么处理完后这半个数组就已经被排好了。注意到，<code>merge_sort</code> 与二叉树的后序遍历模板极其相似。因为分治算法的套路是 <strong>分解 -&gt; 解决（触底）-&gt; 合并（回溯）</strong>，先左右分解，再处理合并，回溯就是在退栈，即相当于后序遍历。</p> <h4 id="要点-2"><a href="#要点-2" class="header-anchor">#</a> 要点</h4> <h5 id="写递归的要点"><a href="#写递归的要点" class="header-anchor">#</a> 写递归的要点</h5> <p><strong>明白一个函数的作用并相信它能完成这个任务，千万不要跳进这个函数里面企图探究更多细节，</strong> 否则就会陷入无穷的细节无法自拔，人脑能压几个栈啊。</p> <p>以遍历二叉树为例</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>void traverse(TreeNode* root) {
  if (root == nullptr) return;
  traverse(root-&gt;left);
  traverse(root-&gt;right);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这几行代码就足以遍历任何一棵二叉树了。对于递归函数 <code>traverse(root)</code>，只要相信给它一个根节点 <code>root</code>，它就能遍历这棵树。所以只需要把这个节点的左右节点再传给这个函数就行了。</p> <p>同样扩展到遍历一棵 N 叉树。与二叉树的写法一模一样。不过，对于 N 叉树，显然没有中序遍历。</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>void traverse(TreeNode* root) {
  if (root == nullptr) return;
  for (child : root-&gt;children) traverse(child);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="区别"><a href="#区别" class="header-anchor">#</a> 区别</h4> <h5 id="递归与枚举的区别"><a href="#递归与枚举的区别" class="header-anchor">#</a> 递归与枚举的区别</h5> <p>递归和枚举的区别在于：枚举是横向地把问题划分，然后依次求解子问题；而递归是把问题逐级分解，是纵向的拆分。</p> <h5 id="递归与分治的区别"><a href="#递归与分治的区别" class="header-anchor">#</a> 递归与分治的区别</h5> <p>递归是一种编程技巧，一种解决问题的思维方式；分治算法很大程度上是基于递归的，解决更具体问题的算法思想。</p> <h4 id="例题-2"><a href="#例题-2" class="header-anchor">#</a> 例题</h4> <div class="custom-block tip"><p>给定一个二叉树，它的每个结点都存放着一个整数值。</p> <p>找出路径和等于给定数值的路径总数。</p> <p>路径不需要从根节点开始，也不需要在叶子节点结束，但是路径方向必须是向下的（只能从父节点到子节点）。</p> <p>二叉树不超过 1000 个节点，且节点数值范围是[-1000000,1000000]的整数。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root = [10,5,-3,3,2,null,11,3,-2,null,1], sum = 8

      10
     /  \
    5   -3
   / \    \
  3   2   11
 / \   \
3  -2   1

返回 3。和等于 8 的路径有：

1.  5 -&gt; 3
2.  5 -&gt; 2 -&gt; 1
3. -3 -&gt; 11
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>/**
 * 二叉树结点的定义
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}
 * };
 */
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <div class="custom-block tip"><p>参考代码</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>int pathSum(TreeNode *root, int sum) {
  if (root == nullptr) return 0;
  return count(root, sum) + pathSum(root-&gt;left, sum) +
         pathSum(root-&gt;right, sum);
}

int count(TreeNode *node, int sum) {
  if (node == nullptr) return 0;
  return (node-&gt;val == sum) + count(node-&gt;left, sum - node-&gt;val) +
         count(node-&gt;right, sum - node-&gt;val);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div> <div class="custom-block tip"><p>题目看起来很复杂，不过代码却极其简洁。</p> <p>首先明确，递归求解树的问题必然是要遍历整棵树的，所以二叉树的遍历框架（分别对左右子树递归调用函数本身）必然要出现在主函数 pathSum 中。那么对于每个节点，它们应该干什么呢？它们应该看看，自己和它们的子树包含多少条符合条件的路径。好了，这道题就结束了。</p> <p>按照前面说的技巧，根据刚才的分析来定义清楚每个递归函数应该做的事：</p> <p><code>PathSum</code> 函数：给定一个节点和一个目标值，返回以这个节点为根的树中，和为目标值的路径总数。</p> <p><code>count</code> 函数：给定一个节点和一个目标值，返回以这个节点为根的树中，能凑出几个以该节点为路径开头，和为目标值的路径总数。</p> <div class="language-c++ line-numbers-mode"><pre class="language-text"><code>int pathSum(TreeNode *root, int sum) {
  if (root == nullptr) return 0;
  int pathImLeading = count(root, sum);  // 自己为开头的路径数
  int leftPathSum = pathSum(root-&gt;left, sum);  // 左边路径总数（相信它能算出来）
  int rightPathSum =
      pathSum(root-&gt;right, sum);  // 右边路径总数（相信它能算出来）
  return leftPathSum + rightPathSum + pathImLeading;
}
int count(TreeNode *node, int sum) {
  if (node == nullptr) return 0;
  // 能不能作为一条单独的路径呢？
  int isMe = (node-&gt;val == sum) ? 1 : 0;
  // 左边的，你那边能凑几个 sum - node.val ？
  int leftNode = count(node-&gt;left, sum - node-&gt;val);
  // 右边的，你那边能凑几个 sum - node.val ？
  int rightNode = count(node-&gt;right, sum - node-&gt;val);
  return isMe + leftNode + rightNode;  // 我这能凑这么多个
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>还是那句话，<strong>明白每个函数能做的事，并相信它们能够完成。</strong></p> <p>总结下，<code>PathSum</code> 函数提供了二叉树遍历框架，在遍历中对每个节点调用 <code>count</code> 函数（这里用的是先序遍历，不过中序遍历和后序遍历也可以）。<code>count</code> 函数也是一个二叉树遍历，用于寻找以该节点开头的目标值路径。</p></div></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.2403c8f5.js" defer></script><script src="/assets/js/3.5290c131.js" defer></script><script src="/assets/js/1.61311bc5.js" defer></script><script src="/assets/js/16.74b6388d.js" defer></script>
  </body>
</html>
