"use strict";(self.webpackChunkvuepress_theme_reco_demo=self.webpackChunkvuepress_theme_reco_demo||[]).push([[8102],{3986:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-1bfb8d41",path:"/blogs/Vue3/Vue3+Flask%E6%9E%84%E5%BB%BASPA%E5%BA%94%E7%94%A8.html",title:"Vue3+Flask构建SPA应用",lang:"en-US",frontmatter:{title:"Vue3+Flask构建SPA应用",date:"2021/03/01",tags:["Vue3","flask","axios","Element-plus"],categories:["Vue3"]},excerpt:"<p><strong>快速搭建一个简单的由Vue3提供的frontend和flask提供后端的SPA(单页面应用)，用vscode即可完成，有任何问题可以邮箱或者其他联系方式提问，评论区等有空再弄。</strong></p>\n",headers:[{level:2,title:"安装所需环境",slug:"安装所需环境",children:[]},{level:2,title:"前端",slug:"前端",children:[]},{level:2,title:"启动测试",slug:"启动测试",children:[]},{level:2,title:"小结",slug:"小结",children:[]}],git:{},filePathRelative:"blogs/Vue3/Vue3+Flask构建SPA应用.md"}},9679:(n,s,a)=>{a.r(s),a.d(s,{default:()=>E});var p=a(6252);const e=(0,p._)("p",null,[(0,p._)("strong",null,"快速搭建一个简单的由Vue3提供的frontend和flask提供后端的SPA(单页面应用)，用vscode即可完成，有任何问题可以邮箱或者其他联系方式提问，评论区等有空再弄。")],-1),t=(0,p._)("h2",{id:"安装所需环境",tabindex:"-1"},[(0,p._)("a",{class:"header-anchor",href:"#安装所需环境","aria-hidden":"true"},"#"),(0,p.Uk)(" 安装所需环境")],-1),o=(0,p.Uk)("用"),l={href:"https://v3.cn.vuejs.org/guide/installation.html#vite",target:"_blank",rel:"noopener noreferrer"},r=(0,p.Uk)("Vite"),c=(0,p.Uk)("初始化Vue3"),u=(0,p.uE)('<p>npm:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> init @vitejs/app 你的项目名字\n$ <span class="token builtin class-name">cd</span> 你的项目名字\n$ <span class="token function">npm</span> <span class="token function">install</span>\n<span class="token comment"># 下面这一步仅测试</span>\n$ <span class="token function">npm</span> run dev\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>yarn:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">yarn</span> create @vitejs/app 你的项目名字\n$ <span class="token builtin class-name">cd</span> 你的项目名字\n$ <span class="token function">yarn</span>\n$ <span class="token function">yarn</span> dev\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>',4),i=(0,p.Uk)("添加"),k={href:"https://element-plus.org/#/zh-CN/component/quickstart#yin-ru-element-plus",target:"_blank",rel:"noopener noreferrer"},b=(0,p.Uk)("Element-plus"),m=(0,p.Uk)("作为组件UI，引用方法为全局，添加axios。"),d=(0,p.uE)('<p>npm:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> element-plus --save\n<span class="token function">npm</span> <span class="token function">install</span> axios -S\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在main.js中写入以下内容</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>\n<span class="token keyword">import</span> ElementPlus <span class="token keyword">from</span> <span class="token string">&#39;element-plus&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token string">&#39;element-plus/lib/theme-chalk/index.css&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App.vue&#39;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>\napp<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$axios <span class="token operator">=</span> axios<span class="token punctuation">;</span>\napp<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementPlus<span class="token punctuation">)</span>\napp<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>',4),g=(0,p.uE)('<li><p>在这个根目录下创建一个main.py文件，准备所需环境</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 强烈建议使用pipenv，在虚拟环境中安装依赖，下面是在虚拟环境中使用</span>\npipenv install\npipenv shell\npipenv install Flask\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在main.py文件中写入</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span> render_template<span class="token punctuation">,</span>request\n\napp <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">,</span> static_folder<span class="token operator">=</span><span class="token string">&#39;./dist/assets&#39;</span><span class="token punctuation">,</span> template_folder<span class="token operator">=</span><span class="token string">&#39;./dist&#39;</span><span class="token punctuation">)</span>\n\n<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span>\n<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">)</span>\n\n<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">&#39;/upload&#39;</span><span class="token punctuation">,</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token keyword">def</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>\n    data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>request<span class="token punctuation">.</span>data<span class="token punctuation">)</span>  \n    <span class="token keyword">return</span> <span class="token string">&#39;上传ok&#39;</span>\n\n<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>\n    <span class="token comment"># 调试模式</span>\n    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>到此，准备工作和flask代码编写的任务算结束了</strong></p></li>',1),v=(0,p.uE)('<h2 id="前端" tabindex="-1"><a class="header-anchor" href="#前端" aria-hidden="true">#</a> 前端</h2><p>任务算是很简单，仅改变小部分代码</p><ol><li>App.vue</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// &lt;template&gt;代码如下</span>\n\n<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>\n    <span class="token comment">// 这个容器模块相当于把页面分为了header和main上下两个区域</span>\n  <span class="token operator">&lt;</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span><span class="token operator">&lt;</span>img alt<span class="token operator">=</span><span class="token string">&quot;logo&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;./assets/logo.png&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>header<span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>el<span class="token operator">-</span>main <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;main&quot;</span><span class="token operator">&gt;</span>\n        <span class="token comment">// main里藏着我们的小组件</span>\n      <span class="token operator">&lt;</span>defineComponent <span class="token operator">/</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>main<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>container<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>\n<span class="token keyword">import</span> defineComponent <span class="token keyword">from</span> <span class="token string">&quot;./components/default.vue&quot;</span><span class="token punctuation">;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>\n\n<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>\n    <span class="token operator">...</span>\n\t<span class="token comment">// 这里main的样式仅是居中罢了</span>\n\t<span class="token punctuation">.</span>main <span class="token punctuation">{</span>\n  <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol start="2"><li><p>src/components/有一个hello？.vue，我把它改名成了default.vue</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// template代码</span>\n<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>\n    <span class="token comment">// el-row 行，el-col列，一共24列，参数：意思占12列，左右间隔6列</span>\n    <span class="token comment">// 说白了就是这一行的组件居中</span>\n    <span class="token operator">&lt;</span>el<span class="token operator">-</span>row <span class="token operator">:</span>gutter<span class="token operator">=</span><span class="token string">&quot;20&quot;</span><span class="token operator">&gt;</span>\n    <span class="token operator">&lt;</span>el<span class="token operator">-</span>col <span class="token operator">:</span>span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> <span class="token operator">:</span>offset<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>\n        <span class="token operator">&lt;</span>el<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;onSubmit&quot;</span><span class="token operator">&gt;</span>上传<span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>button<span class="token operator">&gt;</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>col<span class="token operator">&gt;</span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>row<span class="token operator">&gt;</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> <span class="token punctuation">{</span> ElMessage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;element-plus&quot;</span><span class="token punctuation">;</span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function">onSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        <span class="token comment">// 全局引用axios</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>$axios\n        <span class="token comment">// 发送post请求到flask建立的api</span>\n        <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;http://127.0.0.1:5000/upload&quot;</span><span class="token punctuation">)</span>\n        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n          <span class="token comment">// 把flask的响应数据通过控制台log出来</span>\n          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n          <span class="token comment">// 弹窗success</span>\n          ElMessage<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n            <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;恭喜你，这是一条成功消息&quot;</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>\n            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>\n          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ol start="3"><li><p><strong>打包build</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> run build\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>执行后项目目录会多出来一个dist文件夹，请确保main.py文件是和dist文件夹同一级目录,前端就算是完成任务了</strong></p></li></ol></li></ol><h2 id="启动测试" tabindex="-1"><a class="header-anchor" href="#启动测试" aria-hidden="true">#</a> 启动测试</h2>',7),h=(0,p.uE)('<p>使用虚拟环境运行main.py</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 在pipenv shell</span>\npython3 main.py\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>',2),f=(0,p.Uk)("看到开启debug和并且网站在"),y={href:"http://127.0.0.1",target:"_blank",rel:"noopener noreferrer"},_=(0,p.Uk)("127.0.0.1"),q=(0,p.Uk)("中运行，在页面中点击按钮，此时main.py程序收到访问，并且页面出现success弹窗，F12控制台能看到日志，恭喜大家完成一个小目标"),w=(0,p._)("h2",{id:"小结",tabindex:"-1"},[(0,p._)("a",{class:"header-anchor",href:"#小结","aria-hidden":"true"},"#"),(0,p.Uk)(" 小结")],-1),x=(0,p._)("p",null,[(0,p.Uk)("这个项目很基础很基础，相当于前后端分离的一个小项目，大家可以自己多琢磨，添加不同的东西，这样子才是学习的动力，"),(0,p._)("strong",null,"然后本篇中，详细解释的地方很少，节约时间，节约生命，毕竟我不能当大家的教科书")],-1),j={},E=(0,a(3744).Z)(j,[["render",function(n,s){const a=(0,p.up)("ExternalLinkIcon");return(0,p.wg)(),(0,p.iD)(p.HY,null,[e,t,(0,p._)("ol",null,[(0,p._)("li",null,[(0,p._)("p",null,[(0,p._)("strong",null,[o,(0,p._)("a",l,[r,(0,p.Wm)(a)]),c])]),u]),(0,p._)("li",null,[(0,p._)("p",null,[i,(0,p._)("a",k,[b,(0,p.Wm)(a)]),m]),d]),g]),v,(0,p._)("ol",null,[(0,p._)("li",null,[h,(0,p._)("p",null,[(0,p._)("strong",null,[f,(0,p._)("a",y,[_,(0,p.Wm)(a)]),q])])])]),w,x],64)}]])}}]);