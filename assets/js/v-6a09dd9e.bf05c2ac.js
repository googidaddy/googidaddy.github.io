"use strict";(self.webpackChunkvuepress_theme_reco_demo=self.webpackChunkvuepress_theme_reco_demo||[]).push([[4116],{437:(e,n,s)=>{s.r(n),s.d(n,{data:()=>l});const l={key:"v-6a09dd9e",path:"/blogs/tech/docker%E5%AE%89%E8%A3%85redis.html",title:"Docker安装Redis",lang:"en-US",frontmatter:{title:"Docker安装Redis",date:"2021/02/07",tags:["docker","redis","centos"],categories:["tech"]},excerpt:"<p><strong>阅读本文大概需要6分钟</strong></p>\n",headers:[{level:2,title:"一、安装Docker(centos)",slug:"一、安装docker-centos",children:[]},{level:2,title:"二、实战安装Redis",slug:"二、实战安装redis",children:[]},{level:2,title:"三、Docker基本命令",slug:"三、docker基本命令",children:[]}],git:{},filePathRelative:"blogs/tech/docker安装redis.md"}},8154:(e,n,s)=>{s.r(n),s.d(n,{default:()=>x});var l=s(6252);const r=(0,l._)("p",null,[(0,l._)("strong",null,"阅读本文大概需要6分钟")],-1),t=(0,l._)("h2",{id:"一、安装docker-centos",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#一、安装docker-centos","aria-hidden":"true"},"#"),(0,l.Uk)(" 一、安装Docker(centos)")],-1),a={class:"custom-container tip"},o=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[(0,l._)("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,l._)("circle",{cx:"12",cy:"12",r:"9"}),(0,l._)("path",{d:"M12 8h.01"}),(0,l._)("path",{d:"M11 12h1v4h1"})])],-1),c=(0,l._)("p",{class:"custom-container-title"},"TIP",-1),d=(0,l.Uk)("来自"),i={href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"},p=(0,l.Uk)("官网"),u=(0,l.Uk)("的力量！"),g=(0,l.uE)('<ol><li><p>安装依赖包</p><p><code>sudo yum install -y yum-utils</code></p></li><li><p>添加yum软件源</p><div class="language-sudo ext-sudo line-numbers-mode"><pre class="language-sudo"><code>sudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（可选）国内源</p><div class="language-sudo ext-sudo line-numbers-mode"><pre class="language-sudo"><code>sudo yum-config-manager \\\n    --add-repo \\\n    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>安装docker核心</p><p><code>sudo yum install docker-ce docker-ce-cli containerd.io</code></p></li><li><p>运行docker</p><p>设置开机自启动</p><p><code>sudo systemctl enable docker</code></p><p>运行docker</p><p><code>sudo systemctl start docker</code></p></li><li><p>测试docker是否安装好</p><p>下面这个命令会拉一遍helloworld这个仓库，成功的结果大家能知道的。</p><p><code>sudo docker run hello-world</code></p></li></ol>',1),m=(0,l._)("h2",{id:"二、实战安装redis",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#二、实战安装redis","aria-hidden":"true"},"#"),(0,l.Uk)(" 二、实战安装Redis")],-1),_=(0,l._)("div",{class:"custom-container tip"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[(0,l._)("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,l._)("circle",{cx:"12",cy:"12",r:"9"}),(0,l._)("path",{d:"M12 8h.01"}),(0,l._)("path",{d:"M11 12h1v4h1"})])]),(0,l._)("p",{class:"custom-container-title"},"TIP"),(0,l._)("p",null,[(0,l._)("strong",null,"个人十分建议以这种方式来安装Redis，没错！我在教你做事")]),(0,l._)("ol",null,[(0,l._)("li",null,[(0,l._)("p",null,[(0,l._)("strong",null,[(0,l._)("u",null,"下载镜像")])]),(0,l._)("p",null,[(0,l._)("code",null,"docker pull redis")])]),(0,l._)("li",null,[(0,l._)("p",null,[(0,l._)("strong",null,[(0,l._)("u",null,"执行镜像")])]),(0,l._)("p",null,"创建一个容器来执行镜像，容器名字 指定端口和背景运行"),(0,l._)("p",null,[(0,l._)("code",null,"docker run --name redis-lab -p 6379:6379 -d redis")])]),(0,l._)("li",null,[(0,l._)("p",null,[(0,l._)("u",null,[(0,l._)("strong",null,"检查容器")])]),(0,l._)("p",null,[(0,l._)("code",null,"docker ps")]),(0,l._)("p",null,[(0,l._)("strong",null,"从镜像到容器的过程.")]),(0,l._)("p",null,[(0,l._)("img",{src:"https://i.loli.net/2021/02/07/CIT7YQ5GU2xScm6.png",alt:"container"})])]),(0,l._)("li",null,[(0,l._)("p",null,[(0,l._)("strong",null,[(0,l._)("u",null,"测试redis")])]),(0,l._)("p",null,[(0,l.Uk)("经过"),(0,l._)("code",null,"docker ps"),(0,l.Uk)("查询到容器的id，前四位，exec方式进入容器内部，bash命令行打开")]),(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"docker exec -it e819 bash\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br")])]),(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"// 测试\nredis-cli\n// 系统会进入到127.0.0.1:6379内\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"3"),(0,l._)("br")])]),(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"ping\n//pong\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br")])]),(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,'// 测试get/set\nset test "hello world"\n')]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br")])]),(0,l._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,l._)("pre",{class:"language-text"},[(0,l._)("code",null,"get test\n// hello world\n")]),(0,l._)("div",{class:"line-numbers"},[(0,l._)("span",{class:"line-number"},"1"),(0,l._)("br"),(0,l._)("span",{class:"line-number"},"2"),(0,l._)("br")])]),(0,l._)("p",null,[(0,l._)("strong",null,"完整测试过程")]),(0,l._)("p",null,[(0,l._)("img",{src:"https://i.loli.net/2021/02/07/Z8wfAak5uDo73Ee.png",alt:"test_redis"})])])])],-1),b=(0,l.uE)('<h2 id="三、docker基本命令" tabindex="-1"><a class="header-anchor" href="#三、docker基本命令" aria-hidden="true">#</a> 三、Docker基本命令</h2><p><strong>对于初学者来说，docker用到的命令并不多，遵循着不变的启动-&gt;暂停-&gt;删除 or 恢复启动</strong></p><ol><li><p>镜像操作(包含容器)</p><p><strong>拉取镜像</strong></p><p><code>docker pull 某镜像</code></p><p><strong>查看镜像</strong></p><p><code>docker images</code></p><p><strong>删除镜像</strong></p><p><strong>先查看目前拥有的镜像记好id</strong></p><p><strong>一步一步来</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// 确定你一个容器都没有\ndocker rmi 镜像id\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>假如你有容器在运行这个镜像</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// 查看在运行容器\ndocker ps\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>有在运行的容器，需要先暂停</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> [[email protected] dock]# docker psCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES28c830652ec9        centos:latest       &quot;/bin/bash&quot;         25 minutes ago      Up 2 seconds                            thirsty_albattani   [[email protected] dock]# docker stop 28c828c8\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>删除该容器（记录容器前四位id</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[[email protected] dock]# docker rm 28c8\n28c8\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>没有在运行的容器</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker ps -a\n//查看所有的容器（包括没有运行\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>docker rm 有要删除的镜像的容器id\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><strong>确保确保删光了有该镜像的容器</strong></p><p><strong><u>再来删除镜像</u></strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>// 确定你一个容器都没有\ndocker rmi 镜像id\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol>',3),k={},x=(0,s(3744).Z)(k,[["render",function(e,n){const s=(0,l.up)("ExternalLinkIcon");return(0,l.wg)(),(0,l.iD)(l.HY,null,[r,t,(0,l._)("div",a,[o,c,(0,l._)("p",null,[d,(0,l._)("a",i,[p,(0,l.Wm)(s)]),u]),g]),m,_,b],64)}]])}}]);